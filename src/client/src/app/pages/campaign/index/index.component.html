<div class="btn-header">
  <button nbButton status="success" (click)="router.navigateByUrl('pages/campaign/create')" type="submit">ADD NEW CAMPAIGN</button>
  <div>
    <nb-search type="rotate-layout"></nb-search>
    <button (click)="resetSearch()" class="ml-2" nbButton status="primary" size="medium">
      <nb-icon icon="refresh-outline"></nb-icon>
    </button>
  </div>
</div>
<div class="cards mt-4">
  <nb-card size="medium" *ngFor=" let campaign of campaigns | filter:filterTerm; let i = index ">
    <nb-card-header>
      <h6>{{campaign.name}}</h6>
      <p>{{campaign.description}}</p>
    </nb-card-header>
    <nb-card-body>
      <ngx-ol-map
        [center]="[4.984761,34.337429]"
        [zoom]="4"
        [mapId]="'map' + i"
        [points]="campaign.points"
      ></ngx-ol-map>
    </nb-card-body>
    <nb-card-footer>
      <nb-actions class="nb-actions" size="medium">
        <nb-action
          class="action"
          disabled
          icon="pin-outline"
          badgeText="{{campaign.points.length}}"
          badgeDot="true"
          badgePosition="top right"
          badgeStatus="warning" >
        </nb-action>
        <nb-action
          disabled
          class="action"
          icon="person-outline"
          badgeText="{{campaign.numInspectors}}"
          badgeDot="true"
          badgePosition="top right"
          badgeStatus="info" >
        </nb-action>
        <nb-action
          title="View Campaign"
          class="action"
          (click)="router.navigateByUrl('pages/campaign/' + campaign.id + '/view')"
          icon="eye-outline">
        </nb-action>
        <nb-action
          *ngIf="canGenerateCache(campaign)"
          title="Start Caching Images"
          class="action"
          (click)="startCache(campaign)"
          fullWidth
          icon="hard-drive">
        </nb-action>
      </nb-actions>
    </nb-card-footer>
  </nb-card>
</div>
